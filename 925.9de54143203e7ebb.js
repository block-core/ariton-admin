"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[925],{66925:(Ue,L,d)=>{d.r(L),d.d(L,{DataComponent:()=>Be});var e=d(93953),v=d(99213),F=d(96850),c=d(10467),y=d(88834),E=d(3902),A=d(60177),ee=d(18498),x=d(45024),R=d(74402),T=d(21413),_=d(84412),te=d(7673),U=d(96697),M=(d(5964),d(56977)),w=d(96354),oe=d(23294),se=d(28203);class Q{constructor(){this.expansionModel=new x.CB(!0)}toggle(i){this.expansionModel.toggle(this._trackByValue(i))}expand(i){this.expansionModel.select(this._trackByValue(i))}collapse(i){this.expansionModel.deselect(this._trackByValue(i))}isExpanded(i){return this.expansionModel.isSelected(this._trackByValue(i))}toggleDescendants(i){this.expansionModel.isSelected(this._trackByValue(i))?this.collapseDescendants(i):this.expandDescendants(i)}collapseAll(){this.expansionModel.clear()}expandDescendants(i){let t=[i];t.push(...this.getDescendants(i)),this.expansionModel.select(...t.map(n=>this._trackByValue(n)))}collapseDescendants(i){let t=[i];t.push(...this.getDescendants(i)),this.expansionModel.deselect(...t.map(n=>this._trackByValue(n)))}_trackByValue(i){return this.trackBy?this.trackBy(i):i}}class re extends Q{constructor(i,t,n){super(),this.getLevel=i,this.isExpandable=t,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(i){const n=[];for(let s=this.dataNodes.indexOf(i)+1;s<this.dataNodes.length&&this.getLevel(i)<this.getLevel(this.dataNodes[s]);s++)n.push(this.dataNodes[s]);return n}expandAll(){this.expansionModel.select(...this.dataNodes.map(i=>this._trackByValue(i)))}}const k=new e.nKC("CDK_TREE_NODE_OUTLET_NODE");let D=(()=>{class o{constructor(t,n){this.viewContainer=t,this._node=n}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.c1b),e.rXU(k,8))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","cdkTreeNodeOutlet",""]],standalone:!0})}return o})();class ie{constructor(i){this.$implicit=i}}let N=(()=>{class o{constructor(t){this.template=t}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]},standalone:!0})}return o})(),m=(()=>{class o{get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}constructor(t,n){this._differs=t,this._changeDetectorRef=n,this._onDestroy=new T.B,this._levels=new Map,this.viewChange=new _.t({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(n=>!n.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;(0,x.y4)(this._dataSource)?t=this._dataSource.connect(this):(0,R.A)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=(0,te.of)(this._dataSource)),t&&(this._dataSubscription=t.pipe((0,M.Q)(this._onDestroy)).subscribe(n=>this.renderNodeChanges(n)))}renderNodeChanges(t,n=this._dataDiffer,s=this._nodeOutlet.viewContainer,r){const a=n.diff(t);a&&(a.forEachOperation((l,g,p)=>{if(null==l.previousIndex)this.insertNode(t[p],p,s,r);else if(null==p)s.remove(g),this._levels.delete(l.item);else{const Le=s.get(g);s.move(Le,p)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,n){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(r=>r.when&&r.when(n,t))||this._defaultNodeDef}insertNode(t,n,s,r){const a=this._getNodeDef(t,n),l=new ie(t);l.level=this.treeControl.getLevel?this.treeControl.getLevel(t):typeof r<"u"&&this._levels.has(r)?this._levels.get(r)+1:0,this._levels.set(t,l.level),(s||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,l,n),h.mostRecentTreeNode&&(h.mostRecentTreeNode.data=t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e._q3),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["cdk-tree"]],contentQueries:function(n,s,r){if(1&n&&e.wni(r,N,5),2&n){let a;e.mGM(a=e.lsd())&&(s._nodeDefs=a)}},viewQuery:function(n,s){if(1&n&&e.GBs(D,7),2&n){let r;e.mGM(r=e.lsd())&&(s._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],standalone:!0,features:[e.aNF],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(n,s){1&n&&e.eu8(0,0)},dependencies:[D],encapsulation:2})}return o})(),h=(()=>{class o{get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}static#e=this.mostRecentTreeNode=null;get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new T.B,this._dataChanges=new T.B,this._changeDetectorRef=(0,e.WQX)(e.gRc),o.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=function ae(o){let i=o.parentElement;for(;i&&!de(i);)i=i.parentElement;return i?i.classList.contains("cdk-nested-tree-node")?(0,e.Udg)(i.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`),this._tree.treeControl.expansionModel.changed.pipe((0,w.T)(()=>this.isExpanded),(0,oe.F)()).subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnDestroy(){o.mostRecentTreeNode===this&&(o.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}static#t=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.aKT),e.rXU(m))};static#n=this.\u0275dir=e.FsC({type:o,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(n,s){2&n&&e.BMQ("aria-expanded",s.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"],standalone:!0})}return o})();function de(o){const i=o.classList;return!(!i?.contains("cdk-nested-tree-node")&&!i?.contains("cdk-tree"))}const le=/([A-Za-z%]+)$/;let P=(()=>{class o{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}constructor(t,n,s,r){this._treeNode=t,this._tree=n,this._element=s,this._dir=r,this._destroyed=new T.B,this.indentUnits="px",this._indent=40,this._setPadding(),r&&r.change.pipe((0,M.Q)(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,n=null==this._level?t:this._level;return"number"==typeof n?`${n*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const n=this._paddingIndent();if(n!==this._currentPadding||t){const s=this._element.nativeElement,r=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===r?"paddingRight":"paddingLeft";s.style[r]=n||"",s.style[a]="",this._currentPadding=n}}_setLevelInput(t){this._level=isNaN(t)?null:t,this._setPadding()}_setIndentInput(t){let n=t,s="px";if("string"==typeof t){const r=t.split(le);n=r[0],s=r[1]||s}this.indentUnits=s,this._indent=(0,e.Udg)(n),this._setPadding()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(h),e.rXU(m),e.rXU(e.aKT),e.rXU(se.dS,8))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[2,"cdkTreeNodePadding","level",e.Udg],indent:[0,"cdkTreeNodePaddingIndent","indent"]},standalone:!0,features:[e.GFd]})}return o})(),j=(()=>{class o{constructor(t,n){this._tree=t,this._treeNode=n,this.recursive=!1}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(m),e.rXU(h))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(n,s){1&n&&e.bIt("click",function(a){return s._toggle(a)})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",e.L39]},standalone:!0,features:[e.GFd]})}return o})(),ce=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({})}return o})();var X=d(86600),z=d(57786);let V=(()=>{class o extends h{constructor(t,n,s){super(t,n),this.disabled=!1,this.tabIndex=Number(s)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.aKT),e.rXU(m),e.kS0("tabindex"))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{disabled:[2,"disabled","disabled",e.L39],tabIndex:[2,"tabIndex","tabIndex",t=>null==t?0:(0,e.Udg)(t)]},exportAs:["matTreeNode"],standalone:!0,features:[e.Jv_([{provide:h,useExisting:o}]),e.GFd,e.Vt3]})}return o})(),G=(()=>{class o extends N{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(o)))(s||o)}})();static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","matTreeNodeDef",""]],inputs:{when:[0,"matTreeNodeDefWhen","when"],data:[0,"matTreeNode","data"]},standalone:!0,features:[e.Jv_([{provide:N,useExisting:o}]),e.Vt3]})}return o})(),W=(()=>{class o extends P{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(o)))(s||o)}})();static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","matTreeNodePadding",""]],inputs:{level:[2,"matTreeNodePadding","level",e.Udg],indent:[0,"matTreeNodePaddingIndent","indent"]},standalone:!0,features:[e.Jv_([{provide:P,useExisting:o}]),e.GFd,e.Vt3]})}return o})(),$=(()=>{class o{constructor(t,n){this.viewContainer=t,this._node=n}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.c1b),e.rXU(k,8))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","matTreeNodeOutlet",""]],standalone:!0,features:[e.Jv_([{provide:D,useExisting:o}])]})}return o})(),H=(()=>{class o extends m{constructor(){super(...arguments),this._nodeOutlet=void 0}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(o)))(s||o)}})();static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["mat-tree"]],viewQuery:function(n,s){if(1&n&&e.GBs($,7),2&n){let r;e.mGM(r=e.lsd())&&(s._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],standalone:!0,features:[e.Jv_([{provide:m,useExisting:o}]),e.Vt3,e.aNF],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(n,s){1&n&&e.eu8(0,0)},dependencies:[$],styles:[".mat-tree{display:block;background-color:var(--mat-tree-container-background-color)}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color);font-family:var(--mat-tree-node-text-font);font-size:var(--mat-tree-node-text-size);font-weight:var(--mat-tree-node-text-weight)}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height)}.mat-nested-tree-node{border-bottom-width:0}"],encapsulation:2})}return o})(),J=(()=>{class o extends j{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(o)))(s||o)}})();static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[0,"matTreeNodeToggleRecursive","recursive"]},standalone:!0,features:[e.Jv_([{provide:j,useExisting:o}]),e.Vt3]})}return o})(),he=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[ce,X.yE,X.yE]})}return o})();class pe{constructor(i,t,n,s){this.transformFunction=i,this.getLevel=t,this.isExpandable=n,this.getChildren=s}_flattenNode(i,t,n,s){const r=this.transformFunction(i,t);if(n.push(r),this.isExpandable(r)){const a=this.getChildren(i);a&&(Array.isArray(a)?this._flattenChildren(a,t,n,s):a.pipe((0,U.s)(1)).subscribe(l=>{this._flattenChildren(l,t,n,s)}))}return n}_flattenChildren(i,t,n,s){i.forEach((r,a)=>{let l=s.slice();l.push(a!=i.length-1),this._flattenNode(r,t+1,n,l)})}flattenNodes(i){let t=[];return i.forEach(n=>this._flattenNode(n,0,t,[])),t}expandFlattenedNodes(i,t){let n=[],s=[];return s[0]=!0,i.forEach(r=>{let a=!0;for(let l=0;l<=this.getLevel(r);l++)a=a&&s[l];a&&n.push(r),this.isExpandable(r)&&(s[this.getLevel(r)+1]=t.isExpanded(r))}),n}}class me extends x.qS{get data(){return this._data.value}set data(i){this._data.next(i),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}constructor(i,t,n){super(),this._treeControl=i,this._treeFlattener=t,this._flattenedData=new _.t([]),this._expandedData=new _.t([]),this._data=new _.t([]),n&&(this.data=n)}connect(i){return(0,z.h)(i.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,w.T)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}const fe=[{name:"components",type:"folder",children:[{name:"src",type:"folder",children:[{name:"cdk",type:"folder",children:[{name:"package.json",type:"file"},{name:"BUILD.bazel",type:"file"}]},{name:"material",type:"folder"}]}]},{name:"angular",type:"folder",children:[{name:"packages",type:"folder",children:[{name:".travis.yml",type:"file"},{name:"firebase.json",type:"file"}]},{name:"package.json",type:"file"}]},{name:"angularjs",type:"folder",children:[{name:"gulpfile.js",type:"file"},{name:"README.md",type:"file"}]}];var K=d(28741),b=d(53719),S=d(99631),O=d(22312),Y=d(95416),B=d(34635);const ge=o=>["view",o];function ve(o,i){if(1&o&&(e.j41(0,"div",4)(1,"span",8),e.EFF(2,"ID: "),e.j41(3,"a",9),e.EFF(4),e.k0s()(),e.nrm(5,"br"),e.j41(6,"span"),e.EFF(7),e.nrm(8,"br"),e.EFF(9),e.nrm(10,"br"),e.EFF(11),e.nI1(12,"size"),e.nrm(13,"br"),e.EFF(14),e.nrm(15,"br"),e.EFF(16),e.nrm(17,"br"),e.EFF(18),e.nrm(19,"br"),e.k0s()()),2&o){const t=i.$implicit;e.R7$(3),e.Y8G("routerLink",e.eq3(10,ge,t.id)),e.R7$(),e.JRh(t.id),e.R7$(3),e.SpI(" Format: ",t.dataFormat,""),e.R7$(2),e.SpI(" Schema: ",t.schema,""),e.R7$(2),e.SpI(" Size: ",e.bMT(12,8,t.dataSize),""),e.R7$(3),e.SpI(" Created: ",t.dateCreated,""),e.R7$(2),e.SpI(" Published: ",t.published,""),e.R7$(2),e.SpI(" Date Published: ",t.datePublished,"")}}function ye(o,i){if(1&o&&(e.j41(0,"mat-tree-node",10),e.nrm(1,"button",11),e.j41(2,"mat-icon",12),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()),2&o){const t=i.$implicit;e.R7$(2),e.BMQ("aria-label",t.type+"icon"),e.R7$(),e.SpI(" ","file"===t.type?"description":"folder"," "),e.R7$(),e.SpI(" ",t.name," ")}}function be(o,i){if(1&o&&(e.j41(0,"mat-tree-node",13)(1,"button",14)(2,"mat-icon",15),e.EFF(3),e.k0s()(),e.j41(4,"mat-icon",12),e.EFF(5),e.k0s(),e.EFF(6),e.k0s()),2&o){const t=i.$implicit,n=e.XpG();e.R7$(),e.BMQ("aria-label","Toggle "+t.name),e.R7$(2),e.SpI(" ",n.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.R7$(),e.BMQ("aria-label",t.type+"icon"),e.R7$(),e.SpI(" ","file"===t.type?"description":"folder"," "),e.R7$(),e.SpI(" ",t.name," ")}}let Fe=(()=>{class o{onInput(t){this.didInput.set(t.target.value)}createRoleAssignment(){var t=this;return(0,c.A)(function*(){const{status:n,record:s}=yield t.identityService.web5.dwn.records.create({data:"test",message:{recipient:t.didInput(),protocol:O.Aq.uri,protocolPath:"friend",schema:"https://schema.ariton.app/community/schema/friend",dataFormat:"text/plain"}});console.log("Assingment made",n),console.log("Assingment record",s)})()}createDataRequiringRoleAssignment(){var t=this;return(0,c.A)(function*(){const{status:n,record:s}=yield t.identityService.web5.dwn.records.create({data:"test",message:{recipient:t.didInput(),protocol:O.Aq.uri,protocolPath:"album",protocolRole:"friend",schema:"https://schema.ariton.app/community/schema/album",dataFormat:"text/plain"}});if(console.log("Album create",n),s){const{status:r}=yield s.send(t.didInput());console.log("Status from external write:",r),401==r.code&&t.snackBar.open(r.detail,"Close",{duration:3e3})}})()}listAlbums(){var t=this;return(0,c.A)(function*(){var{records:n}=yield t.identityService.web5.dwn.records.query({message:{filter:{protocol:O.Aq.uri}}});console.log("All records:"),console.log(n),t.albums.set(JSON.stringify(n))})()}constructor(t){this.identityService=t,this.didInput=(0,e.vPA)(""),this.snackBar=(0,e.WQX)(Y.UG),this.albums=(0,e.vPA)(""),this.record=(0,e.vPA)(null),this.records=(0,e.vPA)([]),(0,e.QZP)(()=>{this.identityService.initialized()&&this.load()}),this.treeFlattener=new pe(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new re(this.getLevel,this.isExpandable),this.dataSource=new me(this.treeControl,this.treeFlattener),this.dataSource.data=fe}transformer(t,n){return{name:t.name,type:t.type,level:n,expandable:!!t.children}}getLevel(t){return t.level}isExpandable(t){return t.expandable}hasChild(t,n){return n.expandable}getChildren(t){return t.children}load(){var t=this;return(0,c.A)(function*(){const{protocols:n}=yield t.identityService.web5.dwn.protocols.query({message:{filter:{protocol:"https://social-media.xyz"}}});console.log(n);var{records:r}=yield t.identityService.web5.dwn.records.query({message:{filter:{protocol:"https://social-media.xyz"}}});console.log("All records:"),console.log(r),r&&t.records.set(r);var{records:r}=yield t.identityService.web5.dwn.records.query({from:t.identityService.did,message:{filter:{schema:"https://schema.org/Playlist",dataFormat:"application/json"}}});console.log(r);const s=yield t.identityService.web5.dwn.records.query({message:{filter:{parentId:"bafyreianzpmhbgcgam5mys722vnsiuwn7y4ek6kjeyjptttquasw4hge2m"}}});console.log(s.records);var{records:r}=yield t.identityService.web5.dwn.records.query({message:{filter:{protocol:"https://playlist.org/protocol",protocolPath:"playlist/video"}}});console.log(r)})()}registerChatProtocol(){var t=this;return(0,c.A)(function*(){const{protocol:s,status:r}=yield t.identityService.web5.dwn.protocols.configure({message:{definition:{protocol:"https://social-media.xyz",published:!0,types:{post:{schema:"https://social-media.xyz/schemas/postSchema",dataFormats:["text/plain"]},reply:{schema:"https://social-media.xyz/schemas/replySchema",dataFormats:["text/plain"]},image:{dataFormats:["image/jpeg"]},caption:{schema:"https://social-media.xyz/schemas/captionSchema",dataFormats:["text/plain"]}},structure:{post:{$actions:[{who:"anyone",can:["create","read"]}],reply:{$actions:[{who:"recipient",of:"post",can:["create"]},{who:"author",of:"post",can:["create"]}]}},image:{$actions:[{who:"anyone",can:["create","read"]}],caption:{$actions:[{who:"anyone",can:["read"]},{who:"author",of:"image",can:["create"]}]},reply:{$actions:[{who:"author",of:"image",can:["read"]},{who:"recipient",of:"image",can:["create"]}]}}}}}});if(202===r.code&&console.log("Protocol accepted"),console.log(s),console.log(r),s){const{status:a}=yield s.send("did:dht:83azq4wzkghcacu4mt57ne8d5gumnytxxjkpmn5h1shwkafzi5so");202===a.code?console.log("Protocol sent to remote DWNs"):console.error(`Failed to send protocol to remote DWNs. Code: ${a.detail}, Detail: ${a.detail}`)}})()}createChatRecord(){var t=this;return(0,c.A)(function*(){const{record:n,status:s}=yield t.identityService.web5.dwn.records.create({data:"Hey this is my first post!",message:{recipient:"did:dht:83azq4wzkghcacu4mt57ne8d5gumnytxxjkpmn5h1shwkafzi5so",schema:"https://social-media.xyz/schemas/postSchema",dataFormat:"text/plain",protocol:"https://social-media.xyz",protocolPath:"post"}});202===s.code?console.log("Record created successfully!"):console.error(`Failed to create record. Code: ${s.detail}, Detail: ${s.detail}`),console.log(n)})()}createRegistry(){return(0,c.A)(function*(){})()}readRegistries(){return(0,c.A)(function*(){})()}createRecord(t){var n=this;return(0,c.A)(function*(){var{record:s}=yield n.identityService.web5.dwn.records.create({data:{content:"Hello Web5 child!",description:"Keep Building child!",tags:["web5","ariton","did"]},message:{dataFormat:"application/json",published:t,protocolPath:"playlist/video",parentContextId:"bafyreicvvzlgrovmwhoi6snnsiuvgs5eucy4f766vkfgb6sfcqveth5nhy"}});console.log(s)})()}updateRecord(){return(0,c.A)(function*(){})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(B.K))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-data-management"]],standalone:!0,features:[e.Jv_([K.M]),e.aNF],decls:37,vars:4,consts:[["subscriptSizing","dynamic"],["matInput","",3,"input"],["mat-flat-button","",3,"click"],[1,"example-list-wrapping"],[1,"record-line"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matListItemTitle",""],[3,"routerLink"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"type-icon"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(n,s){1&n&&(e.nrm(0,"br"),e.j41(1,"p")(2,"mat-form-field",0)(3,"mat-label"),e.EFF(4,"Target DID"),e.k0s(),e.j41(5,"input",1),e.bIt("input",function(a){return s.onInput(a)}),e.k0s()(),e.nrm(6,"br"),e.j41(7,"button",2),e.bIt("click",function(){return s.createRoleAssignment()}),e.EFF(8,"Create Role Assignment"),e.k0s(),e.nrm(9,"br"),e.j41(10,"button",2),e.bIt("click",function(){return s.createDataRequiringRoleAssignment()}),e.EFF(11,"Create Data Requiring Role Assignment"),e.k0s(),e.nrm(12,"br"),e.j41(13,"button",2),e.bIt("click",function(){return s.listAlbums()}),e.EFF(14,"List Albums"),e.k0s(),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"button",2),e.bIt("click",function(){return s.load()}),e.EFF(18,"Load Data"),e.k0s(),e.EFF(19,"\n\xa0\n"),e.j41(20,"button",2),e.bIt("click",function(){return s.createRecord(!1)}),e.EFF(21,"Create Private Record"),e.k0s(),e.EFF(22,"\n\xa0\n"),e.j41(23,"button",2),e.bIt("click",function(){return s.createRecord(!0)}),e.EFF(24,"Create Public Record"),e.k0s(),e.EFF(25,"\n\xa0\n"),e.j41(26,"button",2),e.bIt("click",function(){return s.registerChatProtocol()}),e.EFF(27,"Register Chat Protocol"),e.k0s(),e.EFF(28,"\n\xa0\n"),e.j41(29,"button",2),e.bIt("click",function(){return s.createChatRecord()}),e.EFF(30,"Create Chat Record"),e.k0s(),e.j41(31,"mat-list",3),e.Z7z(32,ve,20,12,"div",4,e.fX1),e.k0s(),e.j41(34,"mat-tree",5),e.DNE(35,ye,5,3,"mat-tree-node",6)(36,be,7,5,"mat-tree-node",7),e.k0s()),2&n&&(e.R7$(15),e.SpI(" ",s.albums(),"\n"),e.R7$(17),e.Dyx(s.records()),e.R7$(2),e.Y8G("dataSource",s.dataSource)("treeControl",s.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",s.hasChild))},dependencies:[b.RG,b.rl,b.nJ,S.fS,S.fg,ee.Wk,A.MD,F.RI,v.m_,v.An,y.Hl,y.$z,y.iY,E.Fg,E.jt,E.yE,he,G,W,J,H,V,K.M],styles:[".record-line[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.example-tab-icon[_ngcontent-%COMP%]{margin-right:8px}.type-icon[_ngcontent-%COMP%]{color:#757575;margin-right:5px}"]})}return o})();var Z=d(4053),q=d(45189),_e=d(49245),De=d(62060),Ce=d(67136),Ee=d(1639),xe=d(69371),f=d(9454),C=d(25596);function Te(o,i){if(1&o&&(e.j41(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e.EFF(3),e.k0s(),e.j41(4,"mat-panel-description"),e.EFF(5),e.j41(6,"mat-icon"),e.EFF(7,"format_list_bulleted"),e.k0s()()(),e.j41(8,"h3"),e.EFF(9,"Types"),e.k0s(),e.nrm(10,"div",4),e.j41(11,"h3"),e.EFF(12,"Structure"),e.k0s(),e.nrm(13,"div",4),e.j41(14,"mat-action-row")(15,"button",5),e.EFF(16,"Previous"),e.k0s(),e.j41(17,"button",5),e.EFF(18,"End"),e.k0s()()()),2&o){const t=i.$implicit,n=e.XpG();e.R7$(3),e.SpI(" ",t.definition.protocol," "),e.R7$(2),e.SpI(" Published: ",t.definition.published," "),e.R7$(5),e.Y8G("innerHTML",n.getFormattedTypes(t.definition.types),e.npT),e.R7$(3),e.Y8G("innerHTML",n.getFormattedStructure(t.definition.structure),e.npT)}}let Me=(()=>{class o{constructor(){this.accordion=e.ebz.required(f.BS),this.identityService=(0,e.WQX)(B.K),this.protocols=(0,e.vPA)([]),(0,e.QZP)(()=>{this.identityService.initialized()&&this.load()})}ngOnInit(){return(0,c.A)(function*(){})()}load(){var t=this;return(0,c.A)(function*(){const{protocols:n}=yield t.identityService.web5.dwn.protocols.query({message:{}});console.log(n),t.protocols.set(n)})()}getFormattedTypes(t){let n="";for(const s in t)t.hasOwnProperty(s)&&(n+=`<div class="type">\n                            <strong>${s}</strong>`,t[s].schema&&(n+=`<div>Schema: <a href="${t[s].schema}">${t[s].schema}</a></div>`),t[s].dataFormats&&(n+=`<div>Data Formats: ${t[s].dataFormats.join(", ")}</div>`),n+="</div>");return n}getFormattedStructure(t){let n="";const s=a=>a.map(l=>`<div class="action">\n                        <strong>Can:</strong> ${l.can.join(", ")}<br>\n                        <strong>Who:</strong> ${l.who}<br>\n                        ${l.of?`<strong>Of:</strong> ${l.of}<br>`:""}\n                    </div>`).join(""),r=(a,l=0)=>{let g="";for(const p in a)a.hasOwnProperty(p)&&(g+=`<div class="structure" style="margin-left: ${20*l}px;">\n                                <strong>${p}</strong>`,g+="$actions"===p?s(a[p]):r(a[p],l+1),g+="</div>");return g};return n=r(t),n}installProfileProtocol(){var t=this;return(0,c.A)(function*(){const{protocol:n,status:s}=yield t.identityService.web5.dwn.protocols.configure({message:{definition:Z.Q}});console.log("Install status:",s),console.log("Protocol:",n)})()}installSocialProtocol(){var t=this;return(0,c.A)(function*(){const{protocol:n,status:s}=yield t.identityService.web5.dwn.protocols.configure({message:{definition:q.Q}});console.log("Install status:",s),console.log("Protocol:",n)})()}installProtocols(){var t=this;return(0,c.A)(function*(){const n=[Z.Q,q.Q,_e.Q,De.Q,Ce.Q,Ee.Q,xe.Q];for(const s of n){const{protocol:r,status:a}=yield t.identityService.web5.dwn.protocols.configure({message:{definition:s}});console.log("Install status:",a),console.log("Protocol:",r)}yield t.load()})()}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-data-protocols"]],viewQuery:function(n,s){1&n&&e.wEZ(s.accordion,f.BS,5),2&n&&e.NyB()},standalone:!0,features:[e.aNF],decls:15,vars:0,consts:[[1,"action-buttons"],["mat-flat-button","",3,"click"],["mat-button","",3,"click"],["multi","",1,"example-headers-align"],[3,"innerHTML"],["mat-button",""]],template:function(n,s){1&n&&(e.j41(0,"h2"),e.EFF(1,"Data Protocol Management"),e.k0s(),e.j41(2,"p"),e.EFF(3," Ariton stores your data on Decentralized Web Nodes and on your DWNs you have protocols that controls the behavior of your data. Here you can manage your protocols.\n"),e.k0s(),e.j41(4,"div",0)(5,"button",1),e.bIt("click",function(){return s.installProtocols()}),e.EFF(6,"Install Protocols"),e.k0s()(),e.j41(7,"div",0)(8,"button",2),e.bIt("click",function(){return s.accordion().openAll()}),e.EFF(9,"Expand All"),e.k0s(),e.j41(10,"button",2),e.bIt("click",function(){return s.accordion().closeAll()}),e.EFF(11,"Collapse All"),e.k0s()(),e.j41(12,"mat-accordion",3),e.Z7z(13,Te,19,4,"mat-expansion-panel",null,e.fX1),e.k0s()),2&n&&(e.R7$(13),e.Dyx(s.protocols()))},dependencies:[C.Hu,y.Hl,y.$z,E.Fg,A.MD,f.MY,f.BS,f.GK,f.c0,f.Z2,f.WN,f.Q6,v.m_,v.An],styles:[".action-buttons[_ngcontent-%COMP%]{margin-bottom:.5em}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1em;margin-bottom:1em}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%] + .mat-mdc-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}return o})();var u=d(89417),ke=d(5951),Ne=d(82798),Se=d(98703);function Ae(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Message is "),e.j41(2,"strong"),e.EFF(3,"required"),e.k0s()())}function Re(o,i){if(1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"ago"),e.nrm(3,"br"),e.EFF(4),e.nrm(5,"br"),e.EFF(6),e.nrm(7,"br"),e.EFF(8),e.nrm(9,"br"),e.k0s()),2&o){const t=i.$implicit;e.R7$(),e.SpI(" Date: ",e.bMT(2,4,t.created),""),e.R7$(3),e.SpI(" Author: ",t.author,""),e.R7$(2),e.SpI(" Name: ",t.name,""),e.R7$(2),e.SpI(" Message: ",t.message,"")}}let we=(()=>{class o{constructor(){var t=this;this.fb=(0,e.WQX)(u.ok),this.identity=(0,e.WQX)(B.K),this.snackBar=(0,e.WQX)(Y.UG),this.form=this.fb.group({name:[null,u.k0.required],receiver:["did:dht:6sf3y5rj4f8sq8rctpkp6w3npotmqrypnsdkc74j1n7uiu1raaco",u.k0.required],message:[null,u.k0.required]}),this.records=(0,e.vPA)([]),(0,e.QZP)((0,c.A)(function*(){t.identity.initialized()&&setInterval((0,c.A)(function*(){const n=yield t.identity.web5.dwn.records.query({message:{filter:{protocol:"http://free-for-all-protocol.xyz",protocolPath:"post",schema:"eph",dataFormat:"application/json"}}});t.records.set([]),n.records&&n.records.forEach(function(){var s=(0,c.A)(function*(r){let a=yield r.data.json();a={...a,id:r.dataCid,author:r.author,created:r.dateCreated},t.records.update(l=>[...l,a])});return function(r){return s.apply(this,arguments)}}())}),5e3)}))}ngOnInit(){return(0,c.A)(function*(){})()}onSubmit(){var t=this;return(0,c.A)(function*(){const n=t.form.controls.name.value,s=t.form.controls.message.value,r=t.form.controls.receiver.value,{record:a}=yield t.identity.web5.dwn.records.create({data:{name:n,message:s},store:!1,message:{protocol:"http://free-for-all-protocol.xyz",protocolPath:"post",schema:"eph",dataFormat:"application/json"}});if(a){const{status:l}=yield a.send(r);console.log("Record sent:",l,a),t.snackBar.open("Record sent successfully!","Close",{duration:3e3})}})()}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-data-live"]],standalone:!0,features:[e.aNF],decls:32,vars:3,consts:[["name",""],["receiver",""],["message",""],["novalidate","",3,"ngSubmit","formGroup"],[1,"row"],[1,"full-width"],["matInput","","placeholder","Name","maxlength","200","formControlName","name"],["matInput","","placeholder","Receiver","maxlength","200","formControlName","receiver"],["maxlength","300","matInput","","placeholder","Message","formControlName","message"],["align","end"],["mat-flat-button","","color","primary","type","submit"],[1,"message"]],template:function(n,s){if(1&n){const r=e.RV6();e.j41(0,"h1"),e.EFF(1,"Live Data Demo"),e.k0s(),e.j41(2,"form",3),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(s.onSubmit())}),e.j41(3,"mat-card")(4,"mat-card-content")(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),e.EFF(8,"Name"),e.k0s(),e.nrm(9,"input",6,0),e.k0s()(),e.j41(11,"div",4)(12,"mat-form-field",5)(13,"mat-label"),e.EFF(14,"Receiver"),e.k0s(),e.nrm(15,"input",7,1),e.k0s()(),e.j41(17,"div",4)(18,"mat-form-field",5)(19,"mat-label"),e.EFF(20,"Message"),e.k0s(),e.nrm(21,"textarea",8,2),e.DNE(23,Ae,4,0,"mat-error"),e.j41(24,"mat-hint",9),e.EFF(25),e.k0s()()()(),e.j41(26,"mat-card-actions",9)(27,"button",10),e.EFF(28,"Submit"),e.k0s()()()(),e.nrm(29,"br"),e.Z7z(30,Re,10,6,"div",11,e.fX1)}if(2&n){const r=e.sdS(22);e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(21),e.vxM(s.form.controls.message.hasError("required")?23:-1),e.R7$(2),e.SpI("",r.value.length," / 300"),e.R7$(5),e.Dyx(s.records())}},dependencies:[Se.g,A.MD,S.fS,S.fg,b.rl,b.nJ,b.MV,b.TL,y.Hl,y.$z,Ne.Ve,v.m_,ke.Wk,C.Hu,C.RN,C.YY,C.m2,u.X1,u.qT,u.me,u.BC,u.cb,u.tU,u.j4,u.JD],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.message[_ngcontent-%COMP%]{border:1px solid silver;padding:1em;margin-bottom:.5em}"]})}return o})();var Ie=d(36815);function Pe(o,i){1&o&&(e.j41(0,"mat-icon",1),e.EFF(1,"source"),e.k0s(),e.EFF(2," Your Data "))}function je(o,i){1&o&&(e.j41(0,"mat-icon",1),e.EFF(1,"folder"),e.k0s(),e.EFF(2," Public Data "))}function $e(o,i){1&o&&(e.j41(0,"mat-icon",1),e.EFF(1,"format_list_bulleted"),e.k0s(),e.EFF(2," Protocols "))}function Oe(o,i){1&o&&(e.j41(0,"mat-icon",1),e.EFF(1,"stream"),e.k0s(),e.EFF(2," Live (Demo) "))}let Be=(()=>{class o{constructor(){this.layout=(0,e.WQX)(Ie.Y),this.layout.resetActions()}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-data"]],standalone:!0,features:[e.aNF],decls:14,vars:0,consts:[["mat-tab-label",""],[1,"example-tab-icon"]],template:function(n,s){1&n&&(e.j41(0,"mat-tab-group")(1,"mat-tab"),e.DNE(2,Pe,3,0,"ng-template",0),e.nrm(3,"app-data-management"),e.k0s(),e.j41(4,"mat-tab"),e.DNE(5,je,3,0,"ng-template",0),e.j41(6,"p"),e.EFF(7,'Not implemented yet. See "Your Data" tab.'),e.k0s()(),e.j41(8,"mat-tab"),e.DNE(9,$e,3,0,"ng-template",0),e.nrm(10,"app-data-protocols"),e.k0s(),e.j41(11,"mat-tab"),e.DNE(12,Oe,3,0,"ng-template",0),e.nrm(13,"app-data-live"),e.k0s()())},dependencies:[F.RI,F.ES,F.mq,F.T8,v.m_,v.An,Fe,Me,we],styles:[".example-tab-icon[_ngcontent-%COMP%]{margin-right:8px}"]})}return o})()}}]);